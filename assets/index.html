<!DOCTYPE html>
<html style="height:100%">
<head>
    <title></title>
    <script type="text/javascript" src="js/qrcode.min.js"></script>
    <script type="text/javascript" src="js/qr.js"></script>
    <script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
    <style>
        div {
            display: flex;
        }
    </style>
</head>
<body style="margin: 0;width:100%;height: 100%;">

<div style="height:100%;flex-direction: row">
    <div style="flex: 1;;height: 100%">
        <iframe id='iframe' onload="onload" style="width: 100%;height: 100%"  ></iframe>
    </div>
    <div style="width: 380px;;height: 100%;align-items: center;justify-content: center">
        <div style="width:400px;height:260px;display: block">
            <div id="urldes" style="font-size: 15px;color: red;word-break:break-all;margin:0 auto;width:200px"></div>
            <div id="qrcode" style="width: 200px;height: 200px;top: 30px; margin:0 auto">
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    function onload() {

               var iframe = document.getElementById('iframe');             
               var url=window.location.href
               url=url.split('pages')[0]+"js/"
              
               // alert(url);
               $('#iframe').attr("src",url); 
      
                $(iframe).on('load', function (e) { 
                     var url=iframe.contentWindow.location.href        
                      createQRCode(url)
                      $('#urldes').html(url)
                      
                })
    }
    function createQRCode(text) {
        document.getElementById('qrcode').innerHTML = ''
        new QRCode(document.getElementById('qrcode'), {
            text: text,
            width: 200,
            height: 200,
            colorDark: "#000000",
            colorLight: "#E0E0E0",
            correctLevel: QRCode.CorrectLevel.L
        })
    }

    // createQRCode('dsds')
    onload();
</script>
</body>
</html>